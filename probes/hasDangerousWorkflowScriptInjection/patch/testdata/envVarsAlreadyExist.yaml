name: Run benchmark comparison

# Env block intentionally not placed right above the "jobs" block, where our script usually places it
env:
  # Existent but non-related env var
  ISSUE-NUMBER: ${{github.event.issue.number}}

  # Safe but unnused env var. Same name that our script would use
  ISSUE_COMMENT_COMMENT: "${{ github.event.issue_comment.comment.body }}"

  # Safe but unnused env var. Different name than the one our script would use.
  # Ideally we should keep the name as it is, but we don't cover this case yet
  TITLE: ${{github.event.issue.title}}

on:
  issue_comment:
    types: [created]
  issue:
    types: [created]
  pull_request:
    types: [created]

permissions: read-all

jobs:
  using workflow-level env vars:
    steps:
      - run: |
          echo "$ISSUE_NUMBER"
          echo "${{ github.event.issue_comment.comment.body }}"
      - run: |
          echo "${{ github.event.issue.title }}"
          echo "${{ github.event.discussion.body }}"

  using job-level env vars:
    env:
      # Existent but non-related env var
      NUM_COMMENTS: ${{ github.event.issue.comments }}

      # Safe but unnused env var. Same name that our script would use
      ISSUE_BODY: "${{ github.event.issue.body }}"

      # Safe but unnused env var. Different name than the one our script would use.
      # Ideally we should keep the name as it is, but we don't cover this case yet
      PR_BODY: ${{ github.event.pull_request.body }}
    steps:
      - run: |
          echo "$NUM_COMMENTS"
          echo "${{ github.event.issue.body }}"
      - run: |
          echo "${{ github.event.pull_request.body }}"
      
      # Same variable that already was used on previous job. They should reuse the same workflow-level env var
      - run: |
          echo "${{ github.event.discussion.body }}"

  using step-level env vars:
    steps:
      - name: the step
        env:
          # Existent but non-related env var
          ISSUE_ID: ${{ github.event.issue.id }}

          # Safe but unnused env var. Same name that our script would use
          HEAD_COMMIT_MESSAGE: "${{ github.event.head_commit.message }}"

          # Safe but unnused env var. Different name than the one our script would use.
          # Ideally we should keep the name as it is, but we don't cover this case yet
          PR_AUTHOR_NAME: ${{ github.event.head_commit.author.name  }}
        run: |
          echo "$ISSUE_ID"
          echo "${{ github.event.head_commit.message }}"
          echo "${{ github.event.head_commit.author.name }}"
      
      # Same variable that already was used on other jobs. They should reuse the same workflow-level env var
      - run: |
          echo "${{ github.event.discussion.body }}"