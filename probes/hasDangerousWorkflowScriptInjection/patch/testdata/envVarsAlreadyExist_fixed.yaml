name: Run benchmark comparison

# Env block intentionally not placed right above the "jobs" block, where our script usually places it
env:
  # Existent but non-related env var
  ISSUE-NUMBER: ${{ github.event.issue.number }}

  # Safe but unnused env var. Same name that our script would use. No spaces before brackets
  ISSUE_COMMENT_COMMENT: "${{github.event.issue_comment.comment.body}}"

  # Safe but unnused env var. Different name than the one our script would use.
  # Ideally we should keep the name as it is, but we don't cover this case yet
  TITLE: ${{ github.event.issue.title }}
  ISSUE_TITLE: ${{ github.event.issue.title }}
  DISCUSSION_BODY: ${{ github.event.discussion.body }}
  ISSUE_BODY: "${{ github.event.issue.body }}"
  PULL_REQUEST_BODY: ${{ github.event.pull_request.body }}
  HEAD_COMMIT_MESSAGE: "${{ github.event.head_commit.message }}"
  HEAD_COMMIT_AUTHOR_NAME: "${{ github.event.head_commit.author.name }}"

on:
  issue_comment:
    types: [created]
  issue:
    types: [created]
  pull_request:
    types: [created]

permissions: read-all

jobs:
  using workflow-level env vars:
    steps:
      - run: |
          echo "$ISSUE_NUMBER"
          echo "$ISSUE_COMMENT_COMMENT"
      - run: |
          echo "$ISSUE_TITLE"
          echo "$DISCUSSION_BODY"

  using job-level env vars:
    env:
      # Existent but non-related env var
      NUM_COMMENTS: ${{ github.event.issue.comments }}

      # Safe but unnused env var. Same name that our script would use.
      # As it's on job level, our current implementation ignores it and create a new one at workflow level
      ISSUE_BODY: "${{ github.event.issue.body }}"

      # Safe but unnused env var. Different name than the one our script would use.
      # Ideally we should keep the name as it is, but we don't cover this case yet
      PR_BODY: ${{ github.event.pull_request.body }}
    steps:
      - run: |
          echo "$NUM_COMMENTS"
          echo "$ISSUE_BODY"
      - run: |
          echo "$PULL_REQUEST_BODY"
      
      # Same variable that already was used on previous job. They should reuse the same workflow-level env var
      - run: |
          echo "$DISCUSSION_BODY"

  using step-level env vars:
    steps:
      - name: the step
        env:
          # Existent but non-related env var
          ISSUE_ID: ${{ github.event.issue.id }}

          # Safe but unnused env var. Same name that our script would use
          HEAD_COMMIT_MESSAGE: "${{ github.event.head_commit.message }}"

          # Safe but unnused env var. Different name than the one our script would use.
          # Ideally we should keep the name as it is, but we don't cover this case yet
          PR_AUTHOR_NAME: ${{ github.event.head_commit.author.name  }}
        run: |
          echo "$ISSUE_ID"
          echo "$HEAD_COMMIT_MESSAGE"
          echo "$HEAD_COMMIT_AUTHOR_NAME"
      
      # Same variable that already was used other jobs. They should reuse the same workflow-level env var
      - run: |
          echo "$DISCUSSION_BODY"